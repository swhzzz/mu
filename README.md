# ä½¿ç”¨æ–¹æ³•
```
git clone git@github.com:swhzzz/mu.git

cd mu

npm install 

npm run dev
```

# å°ç»“

## ä¸€.`<meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">`é’ˆå¯¹ç§»åŠ¨ç«¯çš„metaæ ‡ç­¾ï¼Œå®½åº¦===è®¾å¤‡å®½åº¦ï¼Œåˆå§‹ç¼©æ”¾æ¯”ä¾‹=1ï¼Œæœ€å¤§ç¼©æ”¾æ¯”ä¾‹=1ï¼Œä¸äºˆè®¸ç”¨æˆ·è¿›è¡Œç¼©æ”¾ã€‚

## äºŒ.ç§»åŠ¨ç«¯300mså»¶è¿Ÿè§£å†³==> `fastclick`
å®‰è£…ğŸ‘‡
```
npm i fastlclick --save 
```
ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼Œimportè¿›æ¥ï¼Œæ³¨å†Œä¸€ä¸‹å°±å¯ä»¥äº†ğŸ‘‡
```
import fastclick from 'fastclick'
fastclick.attach(document.body)
```
å‚è€ƒï¼š[Github FastClick](https://github.com/ftlabs/fastclick)

## ä¸‰.babel-polyfillç”¨æ¥æ”¯æŒæµè§ˆå™¨ä¸æ”¯æŒçš„ES6 APIæ¯”å¦‚promiseã€Setç­‰
å®‰è£…ğŸ‘‡
```
npm install --save babel-polyfill 
```
**æ³¨æ„ï¼šå®‰è£…ä¹‹åå¼•ç”¨æ—¶ï¼Œå¿…é¡»æŠŠpolyfillç¬¬ä¸€ä¸ªå¼•å…¥**
```
import 'babel-polyfill' // ç¬¬ä¸€ä¸ªå¼•å…¥
import Vue from 'vue'
import App from './App'
...
```
å‚è€ƒï¼š[babelå®˜ç½‘](https://babeljs.io/docs/usage/polyfill/)

## å››.vue-router
1.router-linké…ç½®
(1)`<router-link tag="div" to="/route"><span>æ¨è</span></router-link>`å¯ä»¥å½“åšaæ ‡ç­¾ï¼Œç‚¹å‡»ä¼šè·³è½¬åˆ°å¯¹åº”çš„è·¯ç”±(ç”±`to`æ§åˆ¶è·¯ç”±)
(2)åœ¨routeræ–‡ä»¶å¤¹ä¸‹çš„index.jsé‡Œè¦å†™æ˜å¯¼å…¥çš„ç»„ä»¶ï¼Œä»¥åŠè·³è½¬çš„æ—¶å€™çš„ç»„ä»¶ï¼Œå¦‚æœåˆæ¬¡è¿›å…¥é¡µé¢å°±è¦åŠ è½½ï¼Œåˆ™åº”å½“å®šä¹‰`redirect: "/route"`å¯¹åº”çš„ç»„ä»¶ï¼Œè¿™é‡Œè¦æ³¨æ„é…ç½®routesçš„æ—¶å€™ï¼Œcomponentä¸ºå•æ•°
```
// router/index.js

import Vue from 'vue'
import Router from 'vue-router'
import Recommend from '../components/recommend.vue'
import Singer from '../components/singer.vue'
import Rank from '../components/rank.vue'
import Search from '../components/search.vue'

Vue.use(Router)

export default new Router({
  routes: [
    {
      path: '/',
      redirect: '/recommend'
    },
    {
      path: '/recommend',
      component: Recommend
    },
    {
      path: '/singer',
      component: Singer
    },
    {
      path: '/rank',
      component: Rank
    },
    {
      path: '/search',
      component: Search
    }
  ]
})
```
(3)åœ¨app.vueé‡Œå¼•å…¥ï¼ŒåŒæ—¶è¦å†™æ˜`<router-view></router-view>`æ¥å­˜æ”¾è·³è½¬çš„è·¯ç”±çš„å­˜æ”¾
```
// App.vue

<template>
  <div id="app">
    <m-header></m-header>
    <tab></tab>
    <router-view></router-view>
  </div>
</template>

<script>
  import Tab from 'components/tab'

  export default {
    name: 'app',
    components: {
     Tab
    }
  }
</script>

```
2.`router-link-active`è¡¨ç¤ºå½“å‰æ‰€åœ¨çš„è·¯ç”±æ—¶çš„cssæ ·å¼

3.vue-routeré…åˆwebpackå®ç°è·¯ç”±æ‡’åŠ è½½
```
import xx from  'path/to/component'  // ä¸ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½æ—¶å€™çš„å†™æ³•

const xx = () => import('path/to/component') // ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½å†™æ³•
```
4.åµŒå¥—è·¯ç”±ï¼šéœ€è¦åœ¨çˆ¶è·¯ç”±ä¸‹é…ç½®childrené€‰é¡¹
```
    {
      path: '/singer',
      component: Singer,
      children: [
        {
          path: ':id', // è¿™é‡Œåƒä¸‡ä¸è¦åŠ  '/'ï¼ŒåŠ äº†æ–œæ ä¸éœ€è¦ç‚¹å‡»ä¹Ÿä¼šè·³è½¬
          component: SingerDetail
        }
      ]
    },
```
å‚è€ƒï¼š
[vue-router](https://router.vuejs.org/zh-cn/advanced/lazy-loading.html)
[Lazy Loading in Vue using Webpack's Code Splitting](https://alexjoverm.github.io/2017/07/16/Lazy-load-in-Vue-using-Webpack-s-code-splitting/)


## äº”.createdå’Œmounted
åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œrecommendç»„ä»¶åœ¨createdçš„æ—¶å€™å»å¼‚æ­¥è·å–è¯·æ±‚ï¼Œè€Œsliderç»„ä»¶åœ¨mountedæ—¶å€™å»æ¸²æŸ“é¡µé¢ï¼ˆè®¡ç®—å®¹å™¨å®½åº¦ï¼‰ï¼Œé‚£ä¹ˆè¿™é‡Œå°±ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šç”±äºè¯·æ±‚å›¾ç‰‡ä¿¡æ¯æ˜¯å¼‚æ­¥çš„ï¼Œå½“å¾—åˆ°æ•°æ®æ—¶ï¼Œmountedé’©å­é‡Œçš„å‡½æ•°å·²ç»æ‰§è¡Œäº†ï¼ˆå°±æ˜¯è¯´å·²ç»æ·»åŠ classäº†ï¼‰ï¼Œä½†æ˜¯ç”±äºæ•°æ®è¿˜æ²¡æœ‰åˆ°ï¼Œsliderç»„ä»¶é‡Œæ˜¯ç©ºçš„ï¼Œæ‰€ä»¥æ·»åŠ ä¸ä¸Šclassï¼Œè¿™å°±å¯¼è‡´äº†å›¾ç‰‡ä¸èƒ½æ­£å¸¸æ’ç‰ˆï¼Œè§£å†³åŠæ³•æ˜¯ï¼Œç»™sliderçš„å®¹å™¨æ·»åŠ v-ifï¼ˆåˆ¤æ–­data.lengthæ˜¯å¦å­˜åœ¨ï¼‰å½“å¾—åˆ°æ•°æ®ä¹‹åï¼Œå†æ‰§è¡Œmountedé’©å­ï¼Œæ­¤æ—¶æ‰§è¡Œå‡½æ•°å°±å¯ä»¥å°†classæ­£ç¡®åœ°æ·»åŠ ä¸Šå»

## å…­.keep-aliveç¼“å­˜
æ¯æ¬¡åˆ‡æ¢tabçš„æ—¶å€™ï¼Œå†åˆ‡æ¢å›åŸé¡µé¢ï¼Œä¼šé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œæ­¤æ—¶å°±éœ€è¦keep-aliveåŒ…è£¹åŠ¨æ€ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯router-viewï¼Œè¿™æ ·å†åˆ‡æ¢å›æ¥çš„æ—¶å€™å°±ä¸ä¼šå†é‡æ–°æ¸²æŸ“äº†ï¼ŒèŠ‚çº¦äº†æµé‡

## ä¸ƒ.ç”¨jsonpè¯·æ±‚qqéŸ³ä¹ç½‘é¡µæ­Œå•æ•°æ®æ—¶ï¼Œå‘ç°æŠ¥é”™è¿”å›çŠ¶æ€ç æ˜¯500ï¼ŒæœåŠ¡å™¨å‡ºé”™ã€‚ä½†æ˜¯qqéŸ³ä¹è‡ªå·±æ˜¯å¯ä»¥è°ƒç”¨è¿™ä¸ªæ¥å£çš„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ã€‚åŸå› å°±åœ¨äºqqéŸ³ä¹å¯¹è¯·æ±‚åšäº†å¤„ç†ï¼Œæ§åˆ¶å°Network ==> Request Header ä¸‹æœ‰ä¸ªhostå’Œrefererï¼Œhostä¸ºc.y.qq.comï¼Œrefererä¸ºhttps://y.qq.com/portal/playlist.htmlï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªå‚æ•°æ‰è¯·æ±‚ä¸åˆ°æ•°æ®ã€‚å¥½ï¼Œé‚£ä¹ˆæ˜ç¡®äº†é—®é¢˜ï¼Œè¦æ€ä¹ˆè§£å†³ï¼Ÿå‰ç«¯èƒ½åœ¨å‘è¯·æ±‚çš„æ—¶å€™æºå¸¦headeré‡Œçš„å‚æ•°å—ï¼Œæƒ³äº†ä¸€æƒ³å¥½åƒä¸è¡Œï¼Œåç«¯å¥½åƒå¯ä»¥ï¼Œæœ‰äº†ç›´æ¥ç”¨nodejså°±å¥½äº† ã€‚ã€‚ã€‚buildæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸ªdev-server.jsæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘å…ˆå‘ä¸€ä¸ªè¯·æ±‚ç»™dev-serverï¼Œç„¶åè®©dev-serverå»ä¼ªé€ headerï¼Œå†å‘è¯·æ±‚ï¼Œè¿™æ ·è²Œä¼¼å¯ä»¥è¡Œå¾—é€šã€‚é™„ä¸Šdev-serverçš„ä»£ç 
```
var app = express()

var apiRoutes = express.Router()

apiRoutes.get('/getSongSheet', (req, res) => {
  var url = 'https://c.y.qq.com/splcloud/fcgi-bin/fcg_get_diss_by_tag.fcg'
  axios.get(url, {
    headers: {
      host: 'c.y.qq.com',
      referer: 'https://c.y.qq.com/'
    },
    params: req.query
  }).then((response) => {
    res.json(response.data)
  }).catch((e) => {
    console.log(e)
  })
})
app.use('/api', apiRoutes)
```
å½“å‰ç«¯å‘åç«¯å‘è¯·æ±‚æ—¶ï¼Œç”±åç«¯å»è·å–qqéŸ³ä¹çš„æ­Œå•æ•°æ®ï¼Œç„¶åé€šè¿‡res.jsonè¿”å›ç»™å‰ç«¯ï¼Œè¿™æ ·å°±å¯ä»¥æ¸²æŸ“æ•°æ®äº†

## å…«.better-scrollçš„å¤§å‘
**ä¸ºä»€ä¹ˆæˆ‘åˆå§‹åŒ–äº†better-scrollç»“æœä¸èƒ½æ»šåŠ¨ï¼Œé»‘äººé—®å·ï¼Ÿï¼Ÿ**
scrollç»„ä»¶çš„heightä¸€å®šè¦å°äºä»–åŒ…è£¹çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ çš„é«˜åº¦ï¼ï¼ï¼
scrollç»„ä»¶çš„heightä¸€å®šè¦å°äºä»–åŒ…è£¹çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ çš„é«˜åº¦ï¼ï¼ï¼
scrollç»„ä»¶çš„heightä¸€å®šè¦å°äºä»–åŒ…è£¹çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ çš„é«˜åº¦ï¼ï¼ï¼
é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼ï¼ï¼

ä»¥ä¸Šå¦‚æœè¿˜æ˜¯ä¸æˆåŠŸçš„è¯ï¼Œé‚£è¯´æ˜better-scrollçš„åˆå§‹åŒ–æ—¶æœºä¸æ­£ç¡®ï¼Œåœ¨è¿˜æ²¡æœ‰æ¸²æŸ“æ•°æ®çš„æ—¶å€™ï¼Œbetter-scrollå·²ç»åˆå§‹åŒ–ã€‚è§£å†³åŠæ³•===>ä¸ºscrollç»„ä»¶ä¼ é€’ä¸€ä¸ª`:data="someAsyncData"`ï¼Œç„¶åscrollå†…éƒ¨ç”¨ä¸€ä¸ªwatchç›‘å¬dataçš„å˜åŒ–ï¼Œdataå˜åŒ–å°±å°†scrollç»„ä»¶refreshï¼Œé‡æ–°è®¡ç®—å†…å®¹åŒºåŸŸå®½åº¦

## ä¹.better-scrollçš„scrollToElementçš„åº”ç”¨
åœ¨åšæ­Œæ‰‹é¡µé¢çš„æ—¶å€™ï¼Œæœ‰ä¸ªå¸¸è§çš„éœ€æ±‚æ˜¯ç‚¹å‡»æ­Œæ‰‹å¯¹åº”çš„é¦–å­—æ¯ï¼Œè·³è½¬åˆ°æ­Œæ‰‹åˆ—è¡¨ã€‚è¿™é‡Œç®€å•è®°å½•ä¸‹scrollToElementçš„ç”¨æ³•ï¼Œ`scrollToElement(el, time, offsetX, offsetY, easing)`ï¼Œåœ¨ç‚¹å‡»å³ä¾§å­—æ¯çš„æ—¶å€™é€šè¿‡è·å–å®ƒçš„indexï¼Œè®©åé€šè¿‡refè·å¾—listçš„childrenï¼Œæ¥ç€å¼•å…¥scrollè°ƒç”¨scrollToElementæ–¹æ³•ï¼Œæ—¢å¯ä»¥æ»šåŠ¨
å‚è€ƒï¼š[better-scrollæ–‡æ¡£](https://ustbhuangyi.github.io/better-scroll/doc/zh-hans/api.html#scrolltoelementel-time-offsetx-offsety-easing)

## å.singeré¡µé¢çš„å·¦å³è”åŠ¨
é¦–å…ˆè¯´ä¸‹éœ€æ±‚ï¼š
1. å³è¾¹sidebarç‚¹å‡»æ—¶ï¼Œæ­Œæ‰‹åˆ—è¡¨æ»šåŠ¨åˆ°ç›¸åº”ä½ç½®
2. æ­Œæ‰‹åˆ—è¡¨æ»šåŠ¨çš„æ—¶å€™ï¼Œå³è¾¹è¦æ»šåŠ¨åˆ°å¯¹åº”çš„å­—æ¯
3. æ»šåŠ¨çš„æ—¶å€™é¡¶éƒ¨titleä¼šè¢«é¡¶èµ°

é€»è¾‘å®ç°ï¼š 
1. è§ä¹ğŸ‘†

2. æ–°å»ºä¸€ä¸ªæ•°ç»„å­˜æ”¾listçš„é«˜åº¦ä¹‹å’Œï¼Œå½“å‘ç”Ÿæ»šåŠ¨çš„æ—¶å€™ï¼Œç”¨better-scrollå»ç›‘å¬yçš„å˜åŒ–æ´¾å‘äº‹ä»¶å‘Šè¯‰singerç»„ä»¶ï¼Œsingerç»„ä»¶ç›‘å¬pos.yçš„å˜åŒ–ä¿å­˜`this.scrollY=pos.y`ï¼Œå½“scrollYå‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰§è¡Œç›¸åº”æ–¹æ³•ï¼Œåœ¨æ­¤æ–¹æ³•ä¸­åˆ¤æ–­ï¼Œéå†é«˜åº¦æ•°ç»„ï¼Œåˆ¤æ–­-newYçš„å€¼æ˜¯å¦åœ¨ä¸¤ä¸ªé«˜åº¦å€¼ä¹‹é—´ï¼Œè‹¥æ˜¯ï¼Œåˆ™å°†currentIndex = i ï¼Œå¹¶åœ¨sidebarçš„childrenä¸Š:class = "{'active': currentIndex===index}",è¿˜æœ‰ä¸¤ç§ä¸´ç•Œæƒ…å†µï¼ŒnewYå¤§äº0ï¼ˆç”¨æˆ·åœ¨æ­Œæ‰‹é¡µé¢å¾€ä¸‹åˆ’ï¼‰ä»¥åŠæœ€åheight2ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œè¦æ³¨æ„ã€‚

3. åœ¨watch scrollYçš„æ—¶å€™ï¼Œå½“scrollYå¤§äºheight1å°äºheight2æ—¶ï¼Œæ·»åŠ diffå±æ€§ç”¨æ¥è®¡ç®—fixedTitleä¸height2ä¹‹é—´çš„è·ç¦»ï¼ŒåŒæ—¶watch diffå±æ€§ï¼Œå½“diffçš„å€¼å¤§äº0ä¸”å°äº24ï¼ˆ24ä¸ºfixedTitleä¸å½“å‰åˆ—è¡¨å­—æ¯é—´çš„è·ç¦»ï¼Œå°äºè¯´æ˜éœ€è¦è¿›è¡ŒåŠ¨ç”»ï¼‰ï¼Œåˆ©ç”¨transformè¿›è¡ŒåŠ¨ç”»

## åä¸€.vuexç›¸å…³
æ’ä»¶ç›¸å…³ä¹‹å‰ç”¨vuexåšé¡¹ç›®çš„æ—¶å€™ä¸€ç›´æ²¡æœ‰ç”¨åˆ°vuexå®˜æ–¹æä¾›çš„æ’ä»¶ï¼Œè¿™æ¬¡ç”¨äº†ä¸‹createLoggeræ’ä»¶ä»¥åŠåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„process.envå‘ç°è°ƒè¯•æ–¹ä¾¿äº†è®¸å¤šï¼Œä»¥ä¸‹æ˜¯é…ç½®
```
import createLogger from 'vuex/dist/logger'

const debug = process.env.NODE_ENV !== 'production'

export default new Vuex.Store({
  state,
  getters,
  mutations,
  actions,
  strict: debug,
  plugins: debug ? [createLogger()] : []
})
```

## åäºŒ.æ’­æ”¾å™¨playerç»„ä»¶ï¼Œæ ¸å¿ƒ
åˆ†ä¸¤å—ï¼Œå…¨å±æ’­æ”¾å™¨å’Œç¼©å°åœ¨é¡µé¢åº•éƒ¨çš„å°å‹æ’­æ”¾å™¨

1.  å…¨å±æ’­æ”¾å™¨
(1)é¡¶éƒ¨è¿”å›æŒ‰é’®ï¼Œæ­Œæ‰‹ï¼Œæ­Œæ›²ä¿¡æ¯
(2)ä¸­é—´albumçš„å›¾ç‰‡ï¼Œæ— çº¿æ»šåŠ¨ï¼Œç‚¹å‡»æš‚åœæ—¶ï¼Œéœ€è¦æš‚åœanimationåŠ¨ç”»ï¼Œè¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªå±æ€§å«`animation-play-state: paused;`
(3)åº•éƒ¨5ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«æ˜¯åˆ‡æ¢æ’­æ”¾æ¨¡å¼ï¼Œä¸Šä¸€æ›²ï¼Œæ’­æ”¾/æš‚åœï¼Œä¸‹ä¸€æ›²ï¼Œæ”¶è—
- åˆ‡æ¢æ’­æ”¾æ¨¡å¼
é€šè¿‡ç‚¹å‡»iconè§¦å‘äº‹ä»¶æ¥æ”¹å˜modeï¼Œç¬¬ä¸€æ­¥å…ˆé€šè¿‡Vuexçš„gettersæ¥è·å–å½“å‰çš„modeï¼Œç¬¬äºŒæ­¥å½“å‰çš„æ’­æ”¾æ¨¡å¼+1å–3çš„ä½™æ•°å¯ä»¥å¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æ’­æ”¾æ¨¡å¼ï¼Œç¬¬ä¸‰æ­¥å‘èµ·ä¸€ä¸ªmutationæ”¹å˜å½“å‰çš„modeï¼Œç¬¬å››éƒ¨åˆ¤æ–­å½“å‰çš„æ’­æ”¾æ¨¡å¼æ˜¯å“ªä¸ªï¼Œrandomçš„è¯åˆ™æ‰“ä¹±æ’­æ”¾åˆ—è¡¨ï¼Œé»˜è®¤åˆ—è¡¨å¾ªç¯åˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œå•æ›²å¾ªç¯åˆ™åœ¨endedæ—¶æ”¹å˜currentTime
- ä¸Šä¸€æ›²/ä¸‹ä¸€æ›²
è¿™é‡Œç”¨åˆ°äº†audioæ ‡ç­¾çš„ä¸¤ä¸ªapiï¼Œéœ€è¦äº›è·å¾—audioçš„refsç„¶åé€šè¿‡play()å’Œpause()æ¥åˆ‡æ¢æ’­æ”¾çŠ¶æ€ï¼Œå½“ç„¶è¿™é‡Œæ¶‰åŠåˆ°äº†çŠ¶æ€çš„åˆ‡æ¢ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸´ç•Œå€¼çš„æƒ…å†µ

- æ’­æ”¾/æš‚åœ
åˆ‡æ¢isPlayingçŠ¶æ€ï¼Œ`togglePlay()`

2. miniæ’­æ”¾å™¨
(1)å·¦è¾¹å›¾ç‰‡+æ­Œæ›²ä¿¡æ¯ï¼Œå›¾ç‰‡åšanimationæ—‹è½¬
(2)å³è¾¹iconåˆ‡æ¢æš‚åœæ’­æ”¾å’Œçº¢å¿ƒåˆ‡æ¢

3. progress-barè¿›åº¦æ¡
- å·¦å³æ—¶é—´
è¿™é‡Œaudioæ ‡ç­¾é¡µæä¾›äº†åŸç”Ÿçš„apiæ”¯æŒï¼Œå¯ä»¥é€šè¿‡this.$refs.audio.currentTimeæ¥**å®æ—¶**è·å–ç°åœ¨æ’­æ”¾å½“å¤šå°‘ç§’äº†ï¼Œæ€»æ—¶é—´åˆ™å¯ä»¥é€šè¿‡currentSongçš„durationæ¥è·å–(currentSongåˆ™é€šè¿‡songListå’ŒcurrentIndexæ¥è·å–ï¼Œæ‰€ä»¥ä¸éœ€è¦å†å¤šå®šä¹‰ä¸€ä¸ªstate)

- ä¸­é—´è¿›åº¦æ¡
è¿™é‡Œå®šä¹‰ä¸€ä¸ªprogress-barç»„ä»¶ï¼Œéœ€è¦å¤–éƒ¨ä¼ å…¥rate(å½“å‰æ’­æ”¾äº†å¤šå°‘ç§’/æ€»æ—¶é—´)ï¼Œ
ç„¶åæ ¹æ®rateå’Œè¿›åº¦æ¡å®½åº¦ä»¥åŠæ‹–åŠ¨è¿›åº¦æ¡çš„btnå¯ä»¥è®¡ç®—å‡ºåç§»å®½åº¦ï¼Œé€šè¿‡watchå±æ€§rateå·²ç»æ“ä½œrefæ¥æ”¹å˜widthå®ç°è¿›åº¦æ¡çš„å®æ—¶å¢åŠ ï¼›btnåŒç†ï¼›
ç‚¹å‡»è·³è½¬åˆ°æŒ‡å®šçš„æ—¶é—´æ’­æ”¾æ€ä¹ˆå®ç°ï¼Ÿé€šè¿‡emitä¸€ä¸ªäº‹ä»¶ï¼ŒæŠŠç‚¹å‡»æ—¶çš„ä½ç½®(e.target.offsetX/è¿›åº¦æ¡çš„width)å‘Šè¯‰playerï¼Œplayeræ‹¿åˆ°rateä¹‹åä¹˜ä»¥currentSong.durationå°±å¯ä»¥å¾—åˆ°åº”å½“è°ƒåˆ°å¤šå°‘ç§’è¿›è¡Œæ’­æ”¾ï¼Œè®¾ç½®çš„è¯è¿˜æ˜¯audioçš„é‚£ä¸ªapi=> this.$refs.audio.currentTimeï¼Œè¿™æ˜¯ä¸ªå¯è¯»å†™çš„apiï¼Œå®Œäº†ä¹‹åå†ç®—ä¸‹rateä¼ ç»™progresså°±å¥½äº†ã€‚

4.  æ’­æ”¾æ¨¡å¼
(1) é»˜è®¤é¡ºåºæ’­æ”¾ï¼Œæ­¤æ—¶sequenceListå’ŒplayListç›¸åŒ
(2) å•æ›²å¾ªç¯ï¼Œå•æ›²å¾ªç¯ä¸»è¦ç”¨åˆ°äº†audioæ ‡ç­¾çš„å¯è¯»å†™å±æ€§currentTimeå’Œendedå±æ€§ï¼Œå½“ended(æ’­æ”¾å®Œ)æ—¶ï¼Œæ£€æµ‹å½“å‰çš„æ’­æ”¾æ¨¡å¼ï¼Œå¦‚æœæ˜¯loop(å¾ªç¯æ’­æ”¾)åˆ™å°†currentTimeè®¾ç½®ä¸º0ï¼Œå†è°ƒç”¨audioçš„play()å‡½æ•°å®ç°å•æ›²å¾ªç¯
(3) éšæœºæ’­æ”¾ï¼Œæ£€æµ‹å½“å‰çš„æ’­æ”¾æ¨¡å¼ï¼Œå¦‚æœæ˜¯randomï¼Œåˆ™éœ€è¦ç”¨æ´—ç‰Œç®—æ³•æ‰“ä¹±å½“å‰çš„æ’­æ”¾æ¨¡å¼ï¼Œç„¶åå°†currentIndexé‡æ–°è®¾ç½®(å¦‚æœä¸é‡æ–°è®¾ç½®currentIndexç‚¹å‡»éšæœºæ’­æ”¾ä¼šä½¿å½“å‰æ’­æ”¾çš„æ­Œæ›²è¢«æ‰“æ–­æ’å…¥ä¸€é¦–æ–°çš„æ­Œæ›²è¿›è¡Œæ’­æ”¾)ï¼Œå¯»æ‰¾å½“å‰çš„currentIndexä½¿ç”¨ES6çš„findIndexæ–¹æ³•å³å¯ï¼Œé€šè¿‡åˆ¤æ–­currentSong.id === item.idã€‚

5. æ­Œè¯
(1)æ­Œè¯è·å–å’Œè§£æï¼Œå…ˆç”¨axioså‘åç«¯å‘é€è¯·æ±‚ï¼Œå†ç”±åç«¯å‘é€è¯·æ±‚å¾—åˆ°æ•°æ®ï¼Œå¾—åˆ°çš„æ•°æ®æ˜¯ä¸€ä¸ªbase64çš„å­—ç¬¦ä¸²ç”¨`js-base64`æ’ä»¶è¿›è¡Œè§£æï¼Œå¾—åˆ°æ­Œè¯ï¼Œåœ¨è°ƒç”¨`lyric-parser`æ’ä»¶new Lyric()å¾—åˆ°æ­Œè¯çš„å®ä¾‹ï¼Œnew Lyricä¼ å…¥è·å¾—çš„æ­Œè¯å’Œä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ä¾‹é€šè¿‡`play() stop() tooglePlay() seek()`å››ä¸ªæ–¹æ³•æ¥æ“çºµæ­Œè¯çš„æ»šåŠ¨
(2)æ­Œè¯æ»šåŠ¨å®ç°ï¼Œå…ˆæŠŠæ­Œè¯æ¸²æŸ“åˆ°é¡µé¢ï¼Œå¤–é¢åŒ…ä¸€ä¸ªscrollç»„ä»¶ä½¿æ­Œè¯å¯ä»¥æ»šåŠ¨ï¼Œè°ƒç”¨play()æ–¹æ³•å¯ä»¥æ»šåŠ¨æ­Œè¯ï¼ŒtooglePlay()æ–¹æ³•åœ¨æš‚åœæ­Œæ›²æˆ–è€…æ’­æ”¾æ­Œæ›²çš„æ—¶å€™è°ƒç”¨å¯ä»¥åˆ‡æ¢æ­Œè¯æ˜¯å¦æš‚åœæ’­æ”¾ï¼Œå½“lineNumå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†lineNumèµ‹å€¼ç»™dataçš„currentLineIndexï¼Œé€šè¿‡currentLineIndexä¸indexæ¯”è¾ƒæ¥åˆ‡æ¢é«˜äº®çš„è¡Œæ•°ï¼Œå½“lineNum>8æ—¶ï¼Œè°ƒç”¨scrollç»„ä»¶çš„scrollToElementæ–¹æ³•æ»šåŠ¨åˆ°æŒ‡å®šçš„æ­Œè¯è¡Œæ•°(elæ˜¯é€šè¿‡refè·å–pæ ‡ç­¾æ•°ç»„ï¼Œç„¶åé€šè¿‡lineNum-8ä½œä¸ºä¸‹æ ‡æ¥è·å–çš„)ï¼Œè¿™æ ·å°±èƒ½ä½¿å¾—æ­Œè¯ä¿æŒåœ¨ä¸­é—´
(3)æ­Œè¯ä¸cdé¡µé¢åˆ‡æ¢ï¼Œcdé¡µé¢å’Œæ­Œè¯é¡µé¢éƒ½æ˜¯ç»å¯¹å®šä½ï¼Œé€šè¿‡transition-groupçš„nameæ¥è®¾ç½®åŠ¨ç”»ï¼Œè¿™é‡Œè¦æ³¨æ„transition-groupçš„æ¯ä¸ªå­å…ƒç´ å¿…é¡»åŒ…å«keyå±æ€§

## åä¸‰.æ’è¡Œé¡µé¢ä»¥åŠsonglistæ‰©å±•
åœ¨æ’è¡Œé¡µé¢ç‚¹å‡»è¿›å…¥æ­Œæ›²åˆ—è¡¨çš„æ—¶å€™ï¼Œå‰ä¸‰åä¼šå˜æˆçº¢è‰²ï¼Œè¿™é‡Œå¯¹songliståšäº†æ‰©å±•ï¼Œè®©songlistæ¥å—ä¸€ä¸ªprop: rankï¼Œranké»˜è®¤ä¸ºfalseï¼Œå½“ä¸ºtrueæ—¶æ˜¾ç¤ºæ­Œæ›²å‰é¢çš„æ•°å­—

## åå››.æœç´¢é¡µé¢
- search-boxç»„ä»¶ï¼Œå†…éƒ¨æœ‰ä¸ªåŒå‘ç»‘å®šçš„valueï¼Œå½“valueå˜åŒ–æ—¶ï¼Œemitè§¦å‘ç›‘å¬çš„æ—¶é—´listenValueæŠŠvalueä¼ å‡ºå»ï¼Œåœ¨å¤–éƒ¨è¿›è¡Œå‘é€jsonpè¯·æ±‚è¿›è¡Œæœç´¢ï¼Œå½“valueå€¼ä¸ºç©ºçš„æ—¶å€™ï¼Œåˆ™ä¸å‘é€è¯·æ±‚
- searchç»„ä»¶åˆ™æ˜¯ç»‘å®šä¸€ä¸ªäº‹ä»¶åˆ°search-boxä¸Šï¼Œå½“search-boxè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œè¿›è¡Œæœç´¢ï¼ŒæŠŠç»“æœå‘Šè¯‰search-listï¼Œsearch-listè¿›è¡Œæ¸²æŸ“
